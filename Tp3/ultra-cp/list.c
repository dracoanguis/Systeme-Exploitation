#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "list.h"

Liste* Liste_Init(){
    Liste* list = NULL;
    list = calloc(1,sizeof(Liste));
    if (list == NULL)
    {
        fprintf(stderr,"Error: Can't attribute memory for Liste");
        exit(EXIT_FAILURE);
    }
    list->first = NULL;
    return list;
}

void* Liste_POP(Liste* list){
    if (list == NULL || list->first == NULL){
        return NULL;
    }
    void* cont = list->first->contenue;
    Element* suprr = list->first;
    list->first = suprr->suivant;
    free(suprr);
    return cont;
}

int Liste_LEN(Liste* list){
    int taille = 0;
    Element* courrant = list->first;
    while (courrant != NULL)
    {
        taille += 1;
        courrant = courrant->suivant;
    }
    return taille;
}

void Liste_ADD(Liste* list,void* cont){
    Element* new = malloc(sizeof(Element));
    if (new == NULL)
    {
        fprintf(stderr,"Error: Can't attribute memory for new Element");
        exit(EXIT_FAILURE); 
    }
    new->suivant = NULL;
    new->contenue = cont;

    if (list->first != NULL){
        Element* courrant = list->first;
        while (courrant->suivant != NULL)
        {
            courrant = courrant->suivant;
        }
        courrant->suivant = new;
    } 
    else
    {
        list->first = new;
    }  
}

int Liste_End(Liste* list){
    if (list->first != NULL){
        fprintf(stderr,"Error: Trying to close a non-empty Liste");
        exit(EXIT_FAILURE);
    }

    free(list);
    return EXIT_SUCCESS;
}